<?php

require 'vendor/autoload.php'; // Certifique-se de carregar o autoload do Composer

use MatthiasMullie\Minify;

$minifier = new Minify\JS();

// Caminho do arquivo JavaScript original
$minifier->add('./public/js/styleRoot.js');

// Caminho do arquivo JavaScript original
$minifier->add('./core/js/routes.mobi.js');
$minifier->add('./core/js/request.mobi.js');

// Caminho do diretório
$diretorio = 'app/components/';

/*
// Verifica se o diretório existe
if (is_dir($diretorio)) {
    // Abre o diretório
    if ($handle = opendir($diretorio)) {
        // Loop para ler todos os arquivos no diretório
        while (false !== ($arquivo = readdir($handle))) {
            // Exclui os diretórios pai e atual
            if ($arquivo != "." && $arquivo != "..") {
                // Exibe o nome do arquivo
                $minifier->add('var div' . $arquivo . ' = document.querySelector(\'[mb-component="' . $arquivo . '"]\');');
                $minifier->add('if (div' . $arquivo . ') {');
                if (file_exists("$diretorio/$arquivo/$arquivo.js")) {
                    $minifier->add("./$diretorio/$arquivo/$arquivo.js");
                }
                $minifier->add('}');
            }
        }
        // Fecha o manipulador de diretório
        closedir($handle);
    }
}

// Minificar e imprimir diretamente na saída
*/
echo $minifier->minify();
